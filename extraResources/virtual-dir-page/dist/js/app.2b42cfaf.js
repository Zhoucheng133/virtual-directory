(function(){var e={38832:function(e,t,s){"use strict";var i=s(27195),a=function(){var e=this,t=e._self._c;return t("div",{style:{height:e.appHeight},attrs:{id:"app"},on:{dragenter:function(t){return t.preventDefault(),e.handleDragEnter.apply(null,arguments)},dragleave:function(t){return t.preventDefault(),t.stopPropagation(),e.handleDragLeave.apply(null,arguments)},contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.onContextmenu()},click:e.hideMenu}},[e.needLogin?e._e():t("div",{staticClass:"fixItem"},[t("div",{ref:"headRef",staticClass:"head"},[t("div",{class:0==e.dir.length?"itemDir_end":"itemDir",on:{click:function(t){return e.toDir(-1)}}},[e._v("Root")]),e._l(e.dir,(function(s,i){return t("div",{key:i,staticStyle:{display:"flex"}},[t("div",{staticStyle:{"margin-right":"2px","user-select":"none"}},[e._v(">")]),t("div",{class:e.dir.length-1==i?"itemDir_end":"itemDir",on:{click:function(t){return e.toDir(i)}}},[e._v(e._s(s))])])}))],2),t("div",{staticClass:"tools"},[t("a-dropdown",[t("a-button",{attrs:{type:"primary"}},[e._v("上传")]),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",[t("el-upload",{attrs:{action:e.getUploadUrl(),"show-file-list":!1,"on-progress":e.handleProgress,headers:{username:e.userInfo.username,password:e.userInfo.password},"on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeHandler,multiple:""}},[t("div",[e._v("上传文件")])])],1),t("a-menu-item",[t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",id:"fileInput",multiple:"",directory:"",webkitdirectory:""},on:{change:e.handleDirChange}}),t("div",{on:{click:e.uploadDir}},[e._v("上传文件夹")])])],1)],1),t("a-button",{staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{disabled:!e.canDownload()},on:{click:function(t){return e.downloadHandler()}}},[e._v("下载")]),t("div",{staticClass:"newFolder_button",on:{click:e.newFolderHandler}},[e._v("新建文件夹")]),t("div",{class:1==e.selectedList.length?"rename_button":"rename_button_disabled",on:{click:e.reNameHandler}},[e._v("重命名")]),t("div",{class:0==e.selectedList.length?"del_button_disabled":"del_button",on:{click:e.delHandler}},[e._v("删除")]),t("div",{staticClass:"viewStyle",on:{click:e.changeViewStyle}},[e.showInGrid?t("i",{staticClass:"bi bi-grid-3x3"}):t("i",{staticClass:"bi bi-list-columns-reverse"})])],1),t("div",{staticClass:"tools",staticStyle:{"padding-top":"15px","padding-left":"10px"}},[t("a-checkbox",{attrs:{checked:e.isAllSelected(),indeterminate:e.isIndeterminate()},on:{change:e.selectAll}},[e._v("全选 (共"+e._s(e.list.length)+"个项目"+e._s(e.selectedItems())+")")])],1),e.showInGrid?e._e():t("div",{staticClass:"listTitle"},[t("div"),t("div"),t("div",[e._v("名称")]),t("div",[e._v("大小")])])]),e.needLogin?e._e():t("div",{directives:[{name:"body-scroll-lock",rawName:"v-body-scroll-lock",value:e.lockScroll,expression:"lockScroll"}],ref:"mainRef",staticClass:"main"},[e.showInGrid?t("div",{staticClass:"gridView",staticStyle:{"margin-top":"135px"},style:{"grid-template-columns":"repeat("+e.getColumns+", 1fr)",gap:e.getGap+"px"}},e._l(e.list,(function(s,i){return t("div",{key:i},[t("div",{class:e.rightClickIndex==i?"menuGridItem":"gridItem",on:{contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.onContextmenu(i,s)},click:function(t){return e.openItem(s)}}},[t("div",{staticClass:"gridTick"},[t("a-checkbox",{attrs:{checked:s.selected},on:{change:function(t){return e.selectFile(i)},click:function(t){return t.stopPropagation(),e.stopDefault.apply(null,arguments)}}})],1),t("div",{staticClass:"gridIcon"},["image"!=e.getFileType(s)?t("img",{attrs:{src:e.getIconSrc(s),width:"80px",draggable:"false"}}):t("div",{staticClass:"imgView"},[t("el-image",{staticStyle:{"max-width":"80px","max-height":"80px"},attrs:{src:e.getFileContent(s),fit:"scale-down",lazy:"",draggable:"false"}})],1)]),t("div",{staticClass:"gridName"},[e._v(e._s(s.name))])])])})),0):t("div",{staticStyle:{"margin-top":"159px"}},e._l(e.list,(function(s,i){return t("div",{key:i},[t("div",{class:e.rightClickIndex==i?"menuItem":"fileItem",on:{contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.onContextmenu(i,s)}}},[t("div",{staticClass:"tick"},[t("a-checkbox",{attrs:{checked:s.selected},on:{change:function(t){return e.selectFile(i)}}})],1),t("div",{staticClass:"icon",on:{click:function(t){return e.openItem(s)}}},[t("img",{attrs:{src:e.getIconSrc(s),width:"30px",draggable:"false"}})]),t("div",{staticClass:"fileName",on:{click:function(t){return e.openItem(s)}}},[e._v(e._s(s.name))]),t("div",{staticClass:"size",on:{click:function(t){return e.openItem(s)}}},[e._v(e._s(e.formatBytes(s.size)))])])])})),0)]),e.showView?t("div",{class:e.goCloseView?"fileViewer_after":"fileViewer"},[t("div",{staticClass:"infoBar"},[t("div",{staticClass:"viewer_fileName"},[e._v(e._s(e.nowView.name))]),t("div",{staticClass:"viewer_download"},[t("div",{staticClass:"viewer_downloadBt",on:{click:function(t){return e.downloadHandler()}}},[e._v("下载")])]),t("div",{staticClass:"viewer_close",on:{click:e.closeView}},[t("i",{staticClass:"bi bi-x"})])]),t("div",{staticClass:"viewer_main"},["video"==e.getFileType(e.nowView)?t("div",{staticClass:"video_player"},[t("vue-plyr",[t("video",{attrs:{crossorigin:"",playsinline:"",controls:"",src:e.fileLinkGet()}})])],1):"audio"==e.getFileType(e.nowView)?t("div",[t("vue-plyr",{staticClass:"audio_player"},[t("audio",{attrs:{crossorigin:"",controls:"",src:e.fileLinkGet()}})])],1):"image"==e.getFileType(e.nowView)?t("img",{staticClass:"image_viewer",attrs:{src:e.fileLinkGet(),draggable:"false"}}):"pdf"==e.getFileType(e.nowView)?t("iframe",{staticClass:"pdf_viewer",attrs:{src:e.fileLinkGet(),frameborder:"0"}}):t("img",{attrs:{src:e.getIconSrc(e.nowView),width:"150px",draggable:"false"}})])]):e._e(),e.isLoading?t("div",{staticClass:"loadingView"},[t("a-icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"loading"}}),e._v(" Loading... ")],1):e._e(),e.needLogin?t("div",{ref:"loginRef",class:e.goCloseLogin?"loginBg_after":"loginBg"},[t("div",{staticClass:"loginPanel"},[t("div",{staticClass:"title"},[e._v("登录")]),t("div",{staticClass:"inputArea"},[t("div",{staticClass:"inputText"},[e._v("用户")]),t("a-input",{model:{value:e.inputUserInfo.username,callback:function(t){e.$set(e.inputUserInfo,"username",t)},expression:"inputUserInfo.username"}}),t("div",{staticClass:"inputText",staticStyle:{"margin-top":"20px"}},[e._v("密码")]),t("a-input-password",{model:{value:e.inputUserInfo.password,callback:function(t){e.$set(e.inputUserInfo,"password",t)},expression:"inputUserInfo.password"}})],1),t("div",{staticClass:"loginButton",on:{click:e.loginHandler}},[t("i",{staticClass:"bi bi-arrow-right-short"})])])]):e._e(),t("a-modal",{staticStyle:{"user-select":"none"},attrs:{title:"新建文件夹",centered:"",cancelText:"取消",okText:"确定"},on:{ok:e.newFolderOK},model:{value:e.showNewFolder,callback:function(t){e.showNewFolder=t},expression:"showNewFolder"}},[t("a-input",{attrs:{placeholder:"新建文件夹名称"},model:{value:e.newFolderName,callback:function(t){e.newFolderName=t},expression:"newFolderName"}})],1),t("a-modal",{staticStyle:{"user-select":"none"},attrs:{title:"重命名",centered:"",cancelText:"取消",okText:"确定"},on:{ok:e.reNameOK,cancel:e.reNameCancel},model:{value:e.showReName,callback:function(t){e.showReName=t},expression:"showReName"}},[t("a-input",{attrs:{placeholder:"新的文件/文件夹名"},model:{value:e.reName,callback:function(t){e.reName=t},expression:"reName"}})],1),e.needLogin?e._e():t("div",{staticClass:"uploadPanel",style:{height:e.uploadHeight+"px"}},[t("div",{staticClass:"uploadBar",on:{click:e.uploadPanelController}},[e.uploadOk!=e.fileUpload.length?t("i",{staticClass:"bi bi-file-earmark-arrow-up statusIcon"}):t("i",{staticClass:"bi bi-check-circle statusIcon"}),t("div",{staticClass:"uploadTitle"},[e._v("上传列表")]),e.showUpload?t("i",{staticClass:"bi bi-caret-down-fill uploadArrow"}):t("i",{staticClass:"bi bi-caret-up-fill uploadArrow"})]),t("div",{staticClass:"uploadList"},e._l(e.uploadList,(function(s,i){return t("div",{key:i,staticClass:"listContent"},["uploading"==s.status?t("div",{staticClass:"progressBg",style:{width:s.percentage+"%"}}):e._e(),t("div",{staticClass:"listImg"},[t("img",{attrs:{src:e.getIconSrc(s),width:"30px",draggable:"false"}})]),t("div",{staticClass:"listInfo"},[t("div",{staticClass:"listFileName"},[e._v(e._s(s.name))]),t("div",{staticClass:"listFileSize"},[e._v(e._s(e.formatBytes(s.size*s.percentage/100))+" / "+e._s(e.formatBytes(s.size)))])]),t("div",{staticClass:"statusIcon"},["success"==s.status?t("i",{staticClass:"bi bi-check-circle"}):"uploading"==s.status||"ready"==s.status?t("i",{staticClass:"bi bi-file-earmark-arrow-up"}):t("i",{staticClass:"bi bi-x-circle",staticStyle:{color:"red"}})])])})),0)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragging,expression:"isDragging"}],staticClass:"dragBg"},[t("el-upload",{staticClass:"dragView",attrs:{drag:"",action:e.getUploadUrl(),"show-file-list":!1,"on-progress":e.handleProgress,headers:{username:e.userInfo.username,password:e.userInfo.password},"on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeHandler,multiple:""}},[t("div",{staticClass:"dragIcon"},[t("i",{staticClass:"bi bi-file-earmark-arrow-up"})]),t("div",{staticClass:"dragText"},[e._v("将文件拖拽到这里上传")])])],1)],1)},n=[],r=(s(70560),""),o={url:r};const l=s(97218),c=s(53306);var d={data(){return{appHeight:"100vh",player:void 0,list:[],dir:[],selectedList:[],selectAll_prop:!1,nowDir:"",nowView:{},showView:!1,goCloseView:!1,isLoading:!0,needLogin:!0,inputUserInfo:{username:"",password:""},userInfo:{username:"",password:""},goCloseLogin:!1,showNewFolder:!1,newFolderName:"",lockScroll:!1,showReName:!1,reName:"",fileLink:"",fileUpload:[],uploadOk:0,showUpload:!1,uploadHeight:50,uploadList:[],isDragging:!1,rightClickIndex:null,showInGrid:!1,pageWidth:800}},computed:{getGap(){return(this.pageWidth-120*this.getColumns-20)/(this.getColumns-1)},getColumns(){return Math.floor((this.pageWidth-20)/120)}},methods:{stopDefault(e){e.stopPropagation()},changeViewStyle(){this.showInGrid=!this.showInGrid},uploadFiles(e){var t=this;l.post(this.getUploadUrl(e.get("paths")),e,{headers:{"Content-Type":"multipart/form-data",username:this.userInfo.username,password:this.userInfo.password},onUploadProgress:function(s){let i=Math.round(100*s.loaded/s.total);t.addToUploadList({name:e.get("files").name,percentage:i,status:"uploading",size:e.get("files").size})}}).then((t=>{t.data.status?this.addToUploadList({name:e.get("files").name,percentage:100,status:"success",size:e.get("files").size}):this.addToUploadList({name:e.get("files").name,percentage:100,status:"fail",size:e.get("files").size}),this.handleSuccess(t.data)})).catch((e=>{console.error(e)}))},handleDirChange(e){for(let s=0;s<e.target.files.length;s++)if(!e.target.files[s].name.startsWith(".")){var t=new FormData;t.append("files",e.target.files[s]),t.append("paths",e.target.files[s].webkitRelativePath),this.beforeHandler(e.target.files[s]),this.uploadFiles(t)}},uploadDir(){this.$refs.fileInput.click()},handleDragLeave(e){e.preventDefault(),0==e.clientX&&0==e.clientY&&(this.isDragging=!1)},hideMenu(){this.rightClickIndex=null},disableDownload(e){return void 0==e},onContextmenu(e,t){return this.rightClickIndex=e,this.$contextmenu({items:[{label:"打开",disabled:void 0==t,onClick:()=>{this.openItem(t),this.rightClickIndex=null}},{label:"下载",icon:"bi-file-arrow-down",disabled:this.disableDownload(t),onClick:()=>{this.downloadHandler(t),this.rightClickIndex=null}},{label:"刷新",icon:"bi-arrow-clockwise",onClick:()=>{this.reload(),this.rightClickIndex=null},divided:!0},{label:"新建文件夹",icon:"bi-folder-plus",onClick:()=>{this.newFolderHandler(),this.rightClickIndex=null}},{label:"重命名",icon:"bi-pencil-square",disabled:void 0==t,onClick:()=>{for(var s of this.list)s.selected=!1;this.selectedList=[],this.list[e].selected=!0,this.selectedList.push(t),console.log(this.selectedList),this.reNameHandler(),this.rightClickIndex=null}},{label:"删除",icon:"bi-trash3",disabled:void 0==t,onClick:()=>{for(var s of this.list)s.selected=!1;this.selectedList=[],this.list[e].selected=!0,this.selectedList.push(t),this.delHandler(),this.rightClickIndex=null}}],event:event,customClass:"custom-class",zIndex:3,minWidth:150}),!1},canDownload(){return 0!=this.selectedList.length},reload(){for(var e of(this.getList(),this.selectedList=[],this.list))e.selected=!1;this.$message.success("已刷新")},handleDragEnter(){this.isDragging=!0},uploadPanelController(){this.showUpload?this.uploadHeight=50:this.uploadHeight=500,this.showUpload=!this.showUpload},beforeHandler(e){this.fileUpload.push(e),this.uploadHeight=500,this.showUpload=!this.showUpload,this.isDragging=!1},handleError(){this.$message.error("一个或多个文件上传失败"),this.fileUpload=[],this.uploadOk=0,this.getList()},handleSuccess(e){e.status?this.uploadOk+=1:(this.$message.error("上传失败"),this.fileUpload=[],this.uploadOk=0),this.uploadOk==this.fileUpload.length&&(this.$message.success("上传成功"),this.fileUpload=[],this.uploadOk=0,this.getList())},getUploadUrl(e){return void 0==e?o.url+"/api/upload?dir="+encodeURIComponent(this.nowDir)+"&username="+localStorage.getItem("username")+"&password="+localStorage.getItem("password"):o.url+"/api/upload?dir="+encodeURIComponent(this.nowDir)+"/"+encodeURIComponent(e)+"&isDir=true&username="+localStorage.getItem("username")+"&password="+localStorage.getItem("password")},addToUploadList(e){const t=this.uploadList.findIndex((t=>t.name===e.name&&t.size===e.size));"fail"!=e.status?-1!==t?this.uploadList[t]=e:this.uploadList.push(e):this.$message.error("上传失败!")},handleProgress(e,t,s){s.forEach((e=>{this.addToUploadList(e)}))},delOK(){l.get(o.url+"/api/del",{params:{dir:this.nowDir,files:this.selectedList},headers:{username:localStorage.getItem("username"),password:localStorage.getItem("password")}}).then((e=>{1==e.data.status?(this.$message.success("删除成功!"),this.selectedList=[]):(this.$message.error("删除失败!"),this.selectedList=[])})).catch((()=>{this.$message.error("创建请求错误!"),this.selectedList=[]})).finally((()=>{this.getList()}))},delHandler(){this.$createElement;if(0!=this.selectedList.length){var e=this;this.$confirm({title:"你确定要删除选中的文件/文件夹吗?",content:e=>e("div",{style:"color:red;"},["这是不可逆的操作"]),centered:!0,okText:"确定",cancelText:"取消",onOk(){e.delOK()},onCancel(){for(var t of(e.selectedList=[],e.list))t.selected=!1}})}},reNameCancel(){for(var e of(this.showReName=!1,this.selectedList=[],this.list))e.selected=!1},reNameHandler(){1==this.selectedList.length&&(this.showReName=!0,this.reName=this.selectedList[0].name)},reNameOK(){l.get(o.url+"/api/rename",{params:{dir:this.nowDir,oldName:this.selectedList[0].name,newName:this.reName},headers:{username:localStorage.getItem("username"),password:localStorage.getItem("password")}}).then((e=>{1==e.data.status?(this.$message.success("重命名成功!"),this.showReName=!1,this.getList()):(this.$message.error("重命名失败!"),this.showReName=!1),this.reName=""})).catch((()=>{this.$message.error("创建请求错误!"),this.showReName=!1,this.reName=""})).finally((()=>{this.selectedList=[]}))},newFolderOK(){l.get(o.url+"/api/newFolder",{params:{dir:this.nowDir,name:this.newFolderName},headers:{username:localStorage.getItem("username"),password:localStorage.getItem("password")}}).then((e=>{1==e.data.status?(this.$message.success("创建文件夹成功!"),this.showNewFolder=!1,this.getList()):(this.$message.error("创建文件夹失败!"),this.showNewFolder=!1),this.newFolderName=""})).catch((()=>{this.$message.error("创建请求错误!"),this.showNewFolder=!1,this.newFolderName=""}))},newFolderHandler(){this.showNewFolder=!0},downloadHandler(e){if(void 0!=e&&"dir"!=e.type){var t=o.url+"/api/downloadFile?dir="+encodeURIComponent(this.nowDir)+"/";return t+=encodeURIComponent(e.name),t+="&username="+localStorage.getItem("username")+"&password="+localStorage.getItem("password"),void(window.location.href=t)}if(this.showView){t=o.url+"/api/downloadFile?dir="+encodeURIComponent(this.nowDir)+"/";t+=encodeURIComponent(this.nowView.name),t+="&username="+localStorage.getItem("username")+"&password="+localStorage.getItem("password"),window.location.href=t}else if(1==this.selectedList.length&&"dir"!=this.selectedList[0].type){t=o.url+"/api/downloadFile?dir="+encodeURIComponent(this.nowDir)+"/";t+=encodeURIComponent(this.selectedList[0].name),t+="&username="+localStorage.getItem("username")+"&password="+localStorage.getItem("password"),window.location.href=t}else if(this.selectedList.length>1&&this.canDownload()){t=o.url+"/api/multiDownload?dir="+encodeURIComponent(this.nowDir)+"/";const e=this.selectedList.map((e=>encodeURIComponent(e.name))),s=JSON.stringify(e);t+="&files="+s,t+="&username="+localStorage.getItem("username")+"&password="+localStorage.getItem("password"),window.location.href=t}else if("dir"==e.type){t=o.url+"/api/multiDownload?dir="+encodeURIComponent(this.nowDir)+"/";const s=[encodeURIComponent(e.name)],i=JSON.stringify(s);t+="&files="+i,t+="&username="+localStorage.getItem("username")+"&password="+localStorage.getItem("password"),window.location.href=t}},closeView(){this.goCloseView=!0;var e=this;setTimeout((()=>{e.showView=!1,e.goCloseView=!1}),200)},getFileContent(e){return o.url+"/api/imgPreview?dir="+encodeURIComponent(this.nowDir)+"/"+encodeURIComponent(e.name)+"&username="+localStorage.getItem("username")+"&password="+localStorage.getItem("password")},fileLinkGet(){return o.url+"/api/getFile?dir="+encodeURIComponent(this.nowDir)+"/"+encodeURIComponent(this.nowView.name)+"&username="+localStorage.getItem("username")+"&password="+localStorage.getItem("password")},toDir(e){if(-1==e)this.nowDir="",this.dir=[];else{this.dir=this.dir.slice(0,e+1),this.nowDir="";for(const e of this.dir)this.nowDir+="/",this.nowDir+=e}this.getList()},openItem(e){"dir"==e.type?(this.nowDir+="/",this.nowDir+=e.name,this.dir=this.nowDir.split("/").filter(Boolean),this.getList(),this.selectAll_prop=!1):(this.showView=!0,this.nowView=e)},isIndeterminate(){return this.selectedList.length!=this.list.length&&0!=this.selectedList.length},isAllSelected(){return this.selectedList.length==this.list.length&&0!=this.list.length},selectAll(e){if(e.target.checked){this.selectAll_prop=!0,this.selectedList=[];for(const e of this.list)e.selected=!0,this.selectedList.push(e)}else{this.selectAll_prop=!1;for(const e of this.list)e.selected=!1,this.selectedList=[]}},getIconSrc(e){var t=this.getFileType(e);switch(t){case"image":return s(8885);case"folder":return s(60525);case"document":return s(94082);case"pdf":return s(85915);case"audio":return s(30922);case"zip":return s(51844);case"ppt":return s(11571);case"txt":return s(47152);case"video":return s(25416);case"html":return s(54660);case"xls":return s(58974);case"bt":return s(72666);case"unknown":return s(79825)}},selectFile(e){this.list[e].selected?(this.list[e].selected=!1,this.selectedList=this.selectedList.filter((t=>t.name!=this.list[e].name))):(this.list[e].selected=!0,this.selectedList.push(this.list[e]))},getFileType(e){if(void 0==e)return"";if("dir"==e.type)return"folder";const t=e.name.split(".").pop().toLowerCase();switch(t){case"png":case"jpg":case"jpeg":case"gif":case"svg":return"image";case"xls":case"xlsx":return"xls";case"txt":case"c":case"cpp":case"swift":case"java":case"dart":case"vue":case"css":case"js":case"json":case"md":case"php":case"py":case"ruby":case"cs":case"sql":case"go":return"txt";case"doc":case"docx":return"document";case"html":return"html";case"ppt":case"pptx":return"ppt";case"7z":case"rar":case"zip":case"tar":case"gz":return"zip";case"mp3":case"wav":case"ogg":case"flac":case"m4a":return"audio";case"mp4":case"avi":case"mkv":case"mov":case"rmvb":return"video";case"pdf":return"pdf";case"bt":return"bt";default:return"unknown"}},formatBytes(e){if(void 0==e)return"";const t=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Byte";const s=parseInt(Math.floor(Math.log(e)/Math.log(1e3)));return Math.round(e/Math.pow(1e3,s)*100)/100+" "+t[s]},customSort(e,t){let s=0;while(s<e.length&&s<t.length){const i=e.charAt(s),a=t.charAt(s);if(i!==a){if(isNaN(i)||isNaN(a))return i.localeCompare(a);{const i=parseInt(e.substring(s),10)||0,a=parseInt(t.substring(s),10)||0;return i-a}}s++}return e.length-t.length},getList(){this.isLoading=!0,l.get(o.url+"/api/getlist",{params:{dir:this.nowDir},headers:{username:localStorage.getItem("username"),password:localStorage.getItem("password")}}).then((e=>{this.list=e.data.list.sort(((e,t)=>"dir"===e.type&&"dir"!==t.type?-1:"dir"!==e.type&&"dir"===t.type?1:this.customSort(e.name,t.name))).filter((e=>!e.name.startsWith("."))),this.isLoading=!1})).catch((e=>{this.$message.error("加载错误: "+e)}))},async autoLogin(){var e=!1;return await l.get(o.url+"/api/loginRequest",{params:{username:localStorage.getItem("username"),password:localStorage.getItem("password")}}).then((t=>{t.data.status?(e=!0,this.userInfo.username=localStorage.getItem("username"),this.userInfo.password=localStorage.getItem("password")):e=!1})).catch((()=>{e=!1})),e},async loginHandler(){var e=!1;await l.get(o.url+"/api/loginRequest",{params:{username:c.SHA256(this.inputUserInfo.username).toString(),password:c.SHA256(this.inputUserInfo.password).toString()}}).then((t=>{t.data.status?e=!0:this.$message.error("登录失败: 用户名或密码不正确")})).catch((()=>{this.$message.error("登录失败: 登录请求错误")})),1==e&&(localStorage.setItem("username",c.SHA256(this.inputUserInfo.username).toString()),localStorage.setItem("password",c.SHA256(this.inputUserInfo.password).toString()),this.userInfo.username=c.SHA256(this.inputUserInfo.username).toString(),this.userInfo.password=c.SHA256(this.inputUserInfo.password).toString(),this.getList(),setTimeout((()=>{this.needLogin=!1,this.goCloseLogin=!1}),200))},needLoginController(){l.get(o.url+"/api/authRequest").then((async e=>{e.data.needLogin?await this.autoLogin()&&(this.needLogin=!1,this.getList()):(this.getList(),this.needLogin=!1),this.isLoading=!1}))},autoScrollDir(){var e=this;this.$nextTick((()=>{e.$refs.headRef.scrollTo({left:e.$refs.headRef.scrollWidth,behavior:"smooth"})}))},selectedItems(){return 0==this.selectedList.length?"":", 选中"+this.selectedList.length+"个"},updatePageWidth(){this.pageWidth=this.$refs.mainRef.clientWidth}},updated(){this.needLogin||this.updatePageWidth()},created(){document.title="虚拟目录",this.needLoginController()},mounted(){window.addEventListener("keydown",(e=>{"Escape"==e.key&&1==this.showView&&this.closeView()})),window.onresize=()=>{this.updatePageWidth()}},watch:{nowDir:function(){this.autoScrollDir(),this.selectedList=[]},needLogin:function(){this.autoScrollDir()},showView:function(e){this.lockScroll=e,1==e?this.fileLinkGet():this.fileLink=""},isLoading:function(e){this.lockScroll=e}}},u=d,h=s(1001),p=(0,h.Z)(u,a,n,!1,null,null,null),g=p.exports,m=s(79374),f=(s(62467),s(36890)),w=s(85114),v=s.n(w),j=s(19238),b=s(7432);i["default"].use(v()),i["default"].use(j.Z,{plyr:{}}),i["default"].use(m.ZP),i["default"].use(f.Z),i["default"].use(b.Z),i["default"].config.productionTip=!1,new i["default"]({render:e=>e(g)}).$mount("#app")},46700:function(e,t,s){var i={"./af":52496,"./af.js":52496,"./ar":70186,"./ar-dz":46881,"./ar-dz.js":46881,"./ar-kw":16265,"./ar-kw.js":16265,"./ar-ly":40451,"./ar-ly.js":40451,"./ar-ma":68625,"./ar-ma.js":68625,"./ar-sa":88819,"./ar-sa.js":88819,"./ar-tn":87092,"./ar-tn.js":87092,"./ar.js":70186,"./az":44421,"./az.js":44421,"./be":17067,"./be.js":17067,"./bg":43871,"./bg.js":43871,"./bm":54242,"./bm.js":54242,"./bn":8189,"./bn-bd":82507,"./bn-bd.js":82507,"./bn.js":8189,"./bo":5799,"./bo.js":5799,"./br":97803,"./br.js":97803,"./bs":78434,"./bs.js":78434,"./ca":85320,"./ca.js":85320,"./cs":38004,"./cs.js":38004,"./cv":14464,"./cv.js":14464,"./cy":60163,"./cy.js":60163,"./da":80803,"./da.js":80803,"./de":60233,"./de-at":57607,"./de-at.js":57607,"./de-ch":86777,"./de-ch.js":86777,"./de.js":60233,"./dv":66969,"./dv.js":66969,"./el":59618,"./el.js":59618,"./en-au":9245,"./en-au.js":9245,"./en-ca":45036,"./en-ca.js":45036,"./en-gb":31438,"./en-gb.js":31438,"./en-ie":26053,"./en-ie.js":26053,"./en-il":10134,"./en-il.js":10134,"./en-in":847,"./en-in.js":847,"./en-nz":1363,"./en-nz.js":1363,"./en-sg":59022,"./en-sg.js":59022,"./eo":58990,"./eo.js":58990,"./es":79817,"./es-do":78155,"./es-do.js":78155,"./es-mx":80952,"./es-mx.js":80952,"./es-us":39358,"./es-us.js":39358,"./es.js":79817,"./et":25396,"./et.js":25396,"./eu":24338,"./eu.js":24338,"./fa":77030,"./fa.js":77030,"./fi":72292,"./fi.js":72292,"./fil":13578,"./fil.js":13578,"./fo":8900,"./fo.js":8900,"./fr":26067,"./fr-ca":8362,"./fr-ca.js":8362,"./fr-ch":99404,"./fr-ch.js":99404,"./fr.js":26067,"./fy":46742,"./fy.js":46742,"./ga":8152,"./ga.js":8152,"./gd":6920,"./gd.js":6920,"./gl":37234,"./gl.js":37234,"./gom-deva":23578,"./gom-deva.js":23578,"./gom-latn":97054,"./gom-latn.js":97054,"./gu":28166,"./gu.js":28166,"./he":88927,"./he.js":88927,"./hi":12153,"./hi.js":12153,"./hr":39329,"./hr.js":39329,"./hu":32782,"./hu.js":32782,"./hy-am":85023,"./hy-am.js":85023,"./id":96655,"./id.js":96655,"./is":2e4,"./is.js":2e4,"./it":75107,"./it-ch":13045,"./it-ch.js":13045,"./it.js":75107,"./ja":99175,"./ja.js":99175,"./jv":74853,"./jv.js":74853,"./ka":68684,"./ka.js":68684,"./kk":60312,"./kk.js":60312,"./km":91271,"./km.js":91271,"./kn":67256,"./kn.js":67256,"./ko":14833,"./ko.js":14833,"./ku":45258,"./ku.js":45258,"./ky":73430,"./ky.js":73430,"./lb":7207,"./lb.js":7207,"./lo":2238,"./lo.js":2238,"./lt":50920,"./lt.js":50920,"./lv":28769,"./lv.js":28769,"./me":10818,"./me.js":10818,"./mi":15722,"./mi.js":15722,"./mk":17117,"./mk.js":17117,"./ml":69904,"./ml.js":69904,"./mn":8590,"./mn.js":8590,"./mr":29544,"./mr.js":29544,"./ms":40176,"./ms-my":28850,"./ms-my.js":28850,"./ms.js":40176,"./mt":70291,"./mt.js":70291,"./my":64830,"./my.js":64830,"./nb":4893,"./nb.js":4893,"./ne":8782,"./ne.js":8782,"./nl":38337,"./nl-be":62297,"./nl-be.js":62297,"./nl.js":38337,"./nn":58272,"./nn.js":58272,"./oc-lnc":50277,"./oc-lnc.js":50277,"./pa-in":6198,"./pa-in.js":6198,"./pl":35231,"./pl.js":35231,"./pt":93141,"./pt-br":19626,"./pt-br.js":19626,"./pt.js":93141,"./ro":42797,"./ro.js":42797,"./ru":30048,"./ru.js":30048,"./sd":60023,"./sd.js":60023,"./se":7339,"./se.js":7339,"./si":72851,"./si.js":72851,"./sk":89764,"./sk.js":89764,"./sl":40646,"./sl.js":40646,"./sq":81751,"./sq.js":81751,"./sr":79016,"./sr-cyrl":31368,"./sr-cyrl.js":31368,"./sr.js":79016,"./ss":21943,"./ss.js":21943,"./sv":91751,"./sv.js":91751,"./sw":46014,"./sw.js":46014,"./ta":21571,"./ta.js":21571,"./te":24819,"./te.js":24819,"./tet":78646,"./tet.js":78646,"./tg":38641,"./tg.js":38641,"./th":25714,"./th.js":25714,"./tk":57082,"./tk.js":57082,"./tl-ph":39830,"./tl-ph.js":39830,"./tlh":38757,"./tlh.js":38757,"./tr":22015,"./tr.js":22015,"./tzl":6785,"./tzl.js":6785,"./tzm":44924,"./tzm-latn":59126,"./tzm-latn.js":59126,"./tzm.js":44924,"./ug-cn":52134,"./ug-cn.js":52134,"./uk":63350,"./uk.js":63350,"./ur":83397,"./ur.js":83397,"./uz":88556,"./uz-latn":93562,"./uz-latn.js":93562,"./uz.js":88556,"./vi":27751,"./vi.js":27751,"./x-pseudo":61505,"./x-pseudo.js":61505,"./yo":95943,"./yo.js":95943,"./zh-cn":74186,"./zh-cn.js":74186,"./zh-hk":2243,"./zh-hk.js":2243,"./zh-mo":5437,"./zh-mo.js":5437,"./zh-tw":33843,"./zh-tw.js":33843};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id=46700},30922:function(e,t,s){"use strict";e.exports=s.p+"img/audio.9918570b.svg"},72666:function(e,t,s){"use strict";e.exports=s.p+"img/bt.a7da6533.svg"},60525:function(e,t,s){"use strict";e.exports=s.p+"img/folder.78ec3e60.svg"},54660:function(e,t,s){"use strict";e.exports=s.p+"img/html.828e1a10.svg"},8885:function(e,t,s){"use strict";e.exports=s.p+"img/image.25dc5cd1.svg"},85915:function(e,t,s){"use strict";e.exports=s.p+"img/pdf.496faa36.svg"},11571:function(e,t,s){"use strict";e.exports=s.p+"img/ppt.391aca4d.svg"},47152:function(e,t,s){"use strict";e.exports=s.p+"img/txt.f493db78.svg"},79825:function(e,t,s){"use strict";e.exports=s.p+"img/unkown.81e65256.svg"},25416:function(e,t,s){"use strict";e.exports=s.p+"img/video.c6b1d869.svg"},94082:function(e,t,s){"use strict";e.exports=s.p+"img/word.55aa159e.svg"},58974:function(e,t,s){"use strict";e.exports=s.p+"img/xls.27f53986.svg"},51844:function(e,t,s){"use strict";e.exports=s.p+"img/zip.1b170a55.svg"},42480:function(){}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,i,a,n){if(!i){var r=1/0;for(d=0;d<e.length;d++){i=e[d][0],a=e[d][1],n=e[d][2];for(var o=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(o=!1,n<r&&(r=n));if(o){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p=""}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,n,r=i[0],o=i[1],l=i[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)var d=l(s)}for(t&&t(i);c<r.length;c++)n=r[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},i=self["webpackChunkvir_dir_page"]=self["webpackChunkvir_dir_page"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(38832)}));i=s.O(i)})();
//# sourceMappingURL=app.2b42cfaf.js.map